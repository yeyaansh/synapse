# ğŸ“— LEARNING.md â€” My Personal Notes & Journey

This file is a **living journal** of everything I learned, explored, and brainstormed while building the **Synapse Backend**.  
It acts as my **personal knowledge base** and reflection point for future projects.  

---

## ğŸ“š Key Learnings
- ğŸ›£ï¸ Using `express.Router()` to modularize routes instead of bloating `app.js`.
- ğŸ—‚ï¸ Difference between keeping logic in **routes** vs moving them into **controllers**.
- ğŸ§© Mongoose `{ _id: false }` option to prevent unnecessary IDs in sub-schemas.
- ğŸŒ Why `process.env.PORT || 8080` matters for **cloud deployments**.
- âš™ï¸ How middlewares can be applied **globally** or only for **specific routes**.
- ğŸ—ºï¸ Using Mongoose Map type to store dynamic key-value pairs like { "python": 0.9, "react": 0.65 }.
- âœ… Learned how to use **Mongoose `validate` and `validator`** for custom validation:
  - `validate` can be a function (e.g., checking if an array is non-empty).
  - `validator` allows more complex logic with custom error messages.
  - Example:  
    ```js
    skills: {
      type: [String],
      validate: {
        validator: arr => arr.length > 0,
        message: "At least one skill is required!"
      }
    }
    ```

---

## ğŸ”„ Approaches Explored
1. **Folder Structure**  
   - Flat â†’ âŒ messy, not scalable  
   - Modular â†’ âœ… clean, future-proof â†’ I chose this  

2. **Authentication**  
   - Sessions â†’ âŒ requires server-side storage  
   - JWT â†’ âœ… stateless, scalable â†’ I implemented this  

3. **Database**  
   - SQL â†’ âŒ rigid schemas  
   - MongoDB â†’ âœ… flexible with nested objects â†’ my choice  

4. **Route Handling**  
   - Inline logic â†’ âŒ hard to maintain  
   - Controllers â†’ âœ… clear separation of concerns â†’ I went with this  

5. **Dynamic Skill Storage**  
   - Plain objects {} â†’ âŒ lacks schema awareness & Map methods  
   - Mongoose Map type â†’ âœ… provides .set(), .get(), .delete(), easy to persist â†’ I chose this  

6. **Validation Logic**  
   - Required + basic type checking â†’ âŒ limited control  
   - Custom validators â†’ âœ… precise, human-readable errors â†’ now using this

---

## ğŸ§  Brainstorming Notes
- Started with **all routes in `app.js`** â†’ quickly became unmanageable.  
- Considered giving sub-schemas their own `_id` â†’ realized it cluttered data â†’ used `{ _id: false }`.  
- Explored deployment platforms â†’ **Google Cloud**, **Heroku**, **Vercel**, and **AWS**.  
- Thought about storing skills as an array â†’ but updating/deleting would be clunky â†’ switched to Map type.  
- For **validation**, realized built-in checks (like `required: true`) arenâ€™t always enough.  
  - Example: required arrays can still be empty.  
  - Solved this with `validate: { validator: fn, message: "..." }`.

---

## âš¡ Challenges & Solutions
- **Extra `_id` fields in nested objects** â†’ fixed with `{ _id: false }`.  
- **CORS errors** connecting frontend â†’ solved using `cors` middleware.  
- **Server crash on missing `PORT`** â†’ prevented by `process.env.PORT || 8080`.  
- **Authentication & route protection** â†’ built `auth.middleware.js` to validate JWT tokens.  
- **Updating skills dynamically** â†’ solved by using Mongoose Map:
  - .set("python", 0.9) to insert/update  
  - .get("python") to read  
  - .delete("react") to remove  
- **Empty arrays still passing `required: true`** â†’ solved with custom validator to enforce non-empty arrays.

---

## ğŸš€ Future Learning Goals
- ğŸ§ª Add automated testing with **Jest/Mocha**.  
- ğŸ“˜ Explore **TypeScript** for type safety.  
- ğŸ“ Improve logging with **Winston/Morgan**.  
- ğŸ“– Generate proper API docs with **Swagger/OpenAPI**.  
- ğŸŒ± Experiment with skill progression tracking (timestamps, history of updates).  
- ğŸ” Explore advanced Mongoose validations (async validators, conditional validations).

---

## ğŸ“ Personal Reflection
Building this project taught me:  
- How to **design and structure** a real-world backend.  
- The importance of **clean code & scalability**.  
- That documenting not just *what I built*, but also *why I built it*, makes learning much deeper.  
- How Mongoose Map gave me a scalable way to store dynamic user skills without rigid schemas.  
- How **validators** give me better control over data quality, beyond just `required`.

---

## ğŸ“Š Example Data (Map + Validation in action)
```json
"hard_skills": {
  "python": 0.9,
  "javascript": 0.75,
  "git": 0.6
}

"skills": ["python", "javascript"] // validator ensures array is not empty
